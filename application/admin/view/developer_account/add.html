<form id="add-form" class="form-horizontal" role="form" data-toggle="validator" method="POST"
    action="developer_account/addAccount">

    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Appid')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-appid" data-rule="required" class="form-control" name="appid" type="text">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Password')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-password" data-rule="required" class="form-control" name="password" type="text">
        </div>
    </div>

    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">验证码:</label>
        <div class="col-xs-12 col-sm-8">
            <div class="input-group">
                <input data-rule="required" style="width:90%" class="form-control" size="50" name="code" type="text">
                <div class="input-group-addon no-border no-padding">

                    <span><button type="button" id="send" class="btn  btn-success" onclick="sendCode()"><i
                                class="fa fa-envelope-o"></i> 获取验证码</button></span>
                    <span><button id="gets" style="display: none;" type="button" class="btn btn-primary "
                            onclick="reSendCode()"> 重新发送</button></span>
                </div>
                <span class="msg-box n-right" for="c-p8_file"></span>
            </div>
            <ul class="row list-inline faupload-preview" id="p-p8_file"></ul>
        </div>
    </div>
    <div class="form-group layer-footer">
        <label class="control-label col-xs-12 col-sm-2"></label>
        <div class="col-xs-12 col-sm-8">
            <button type="submit" class="btn btn-success btn-embossed disabled">{:__('OK')}</button>
            <button type="reset" class="btn btn-default btn-embossed">{:__('Reset')}</button>
        </div>
    </div>

</form>
<script>
    function sendCode() {

        const appid = $('#c-appid').val();
        const password = $('#c-password').val();
        if (appid && password) {
            Fast.api.ajax({
                url: 'developer_account/sendCode',
                data: {
                    'appid': appid,
                    'password': password
                }
            }, function () {
                Toastr.success("验证码已发送到您的设备");
                $('#gets').show();
                return false;
            })

        }

    }

    function reSendCode() {

        const appid = $('#c-appid').val();
        const password = $('#c-password').val();
        if (appid && password) {
            Fast.api.ajax({
                url: 'developer_account/reSendCode',
                data: {
                    'appid': appid,
                    'password': password
                }
            })

        }

    }
</script>